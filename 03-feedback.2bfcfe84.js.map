{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAGA,IAAIC,EAAqB,GACzB,MAAMC,EAAO,CACXC,OAAQC,SAASC,cAAc,kBAC/BC,QAASF,SAASC,cAAc,SAChCE,WAAYH,SAASC,cAAc,aAwBrCH,EAAKC,OAAOK,iBAAiB,SAAS,EAAAT,EAAAU,WAkBtC,SAAiBC,GACfT,EAAmBS,EAAEC,OAAOC,MAAQF,EAAEC,OAAOE,MA3BZC,EA4BPb,EA3B1Bc,aAAaC,QAAQ,sBAAuBC,KAAKC,UAAUJ,IAD7D,IAAmCA,C,GAQqB,MACxDZ,EAAKC,OAAOK,iBAAiB,UAsB7B,SAAkBE,GAChBA,EAAES,iBACF,MAAMC,EAAWV,EAAEW,cAAcD,SAEjC,IAAIE,EAAc,GAElB,IAAK,MAAMC,KAAWH,EACK,WAArBG,EAAQC,WAGZF,EAAYC,EAAQX,MAAQW,EAAQV,OAEtCY,QAAQC,IAAIJ,GAEZZ,EAAEC,OAAOgB,QAzC2BC,EAzBR,sBA0B5Bb,aAAac,WAAWD,GAD1B,IAAsCA,C,IAOtCE,OAAOC,OAEP,WAEE,GADA9B,EA3BF,WACE,IACE,MAAM+B,EAAoBjB,aAAakB,QAAQ,uBAC/C,GAAID,EACF,OAAOf,KAAKiB,MAAMF,E,CAEpB,MAAOG,GACPV,QAAQC,IAAIS,EAAMvB,MAClBa,QAAQC,IAAIS,EAAMC,Q,CAEpB,OAAO,C,CAiBcC,GACjBpC,EACF,IAAK,MAAMqC,KAAMpC,EACXD,EAAmBC,EAAKoC,GAAI1B,QAC9BV,EAAKoC,GAAIzB,MAAQZ,EAAmBC,EAAKoC,GAAI1B,YAIjDX,EAAqB,E,CAXTsC","sources":["src/js/03-feedback.js"],"sourcesContent":["import { throttle } from 'lodash';\n\nconst STORAGE_FORM_DATA_KEY = 'feedback-form-state';\nlet DataInLocalStorage = {};\nconst refs = {\n  formEl: document.querySelector('.feedback-form'),\n  inputEl: document.querySelector('input'),\n  textareaEl: document.querySelector('textarea'),\n};\n\nfunction getFormDataInLocalStorage() {\n  try {\n    const feedbackFormState = localStorage.getItem('feedback-form-state');\n    if (feedbackFormState) {\n      return JSON.parse(feedbackFormState);\n    }\n  } catch (error) {\n    console.log(error.name);\n    console.log(error.message);\n  }\n  return false;\n}\n\nfunction setFormDataInLocalStorage(feedbackForm) {\n  localStorage.setItem('feedback-form-state', JSON.stringify(feedbackForm));\n}\n\nfunction removeFormDataInLocalStorage(key) {\n  localStorage.removeItem(key);\n}\n\nrefs.formEl.addEventListener('input', throttle(onInput, 500));\nrefs.formEl.addEventListener('submit', onSubmit);\n\nwindow.onload = onLoadPage();\n\nfunction onLoadPage() {\n  DataInLocalStorage = getFormDataInLocalStorage();\n  if (DataInLocalStorage) {\n    for (const el in refs) {\n      if (DataInLocalStorage[refs[el].name]) {\n        refs[el].value = DataInLocalStorage[refs[el].name];\n      }\n    }\n  } else {\n    DataInLocalStorage = {};\n  }\n}\n\nfunction onInput(e) {\n  DataInLocalStorage[e.target.name] = e.target.value;\n  setFormDataInLocalStorage(DataInLocalStorage);\n}\n\nfunction onSubmit(e) {\n  e.preventDefault();\n  const elements = e.currentTarget.elements;\n\n  let formDataObj = {};\n\n  for (const element of elements) {\n    if (element.nodeName === 'BUTTON') {\n      continue;\n    }\n    formDataObj[element.name] = element.value;\n  }\n  console.log(formDataObj);\n\n  e.target.reset();\n  removeFormDataInLocalStorage(STORAGE_FORM_DATA_KEY);\n}\n"],"names":["$kEUo3","parcelRequire","$945622fd0f572e60$var$DataInLocalStorage","$945622fd0f572e60$var$refs","formEl","document","querySelector","inputEl","textareaEl","addEventListener","throttle","e","target","name","value","feedbackForm","localStorage","setItem","JSON","stringify","preventDefault","elements","currentTarget","formDataObj","element","nodeName","console","log","reset","key","removeItem","window","onload","feedbackFormState","getItem","parse","error","message","$945622fd0f572e60$var$getFormDataInLocalStorage","el","$945622fd0f572e60$var$onLoadPage"],"version":3,"file":"03-feedback.2bfcfe84.js.map"}