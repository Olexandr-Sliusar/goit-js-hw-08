{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAGIC,EAAqB,GACnBC,EAAO,CACXC,OAAQC,SAASC,cAAc,kBAC/BC,QAASF,SAASC,cAAc,SAChCE,WAAYH,SAASC,cAAc,aAwBrCH,EAAKC,OAAOK,iBAAiB,SAAS,EAAAT,EAAAU,WAkBtC,SAAiBC,GACfT,EAAmBS,EAAEC,OAAOC,MAAQF,EAAEC,OAAOE,MA3BZC,EA4BPb,EA3B1Bc,aAAaC,QAAQ,sBAAuBC,KAAKC,UAAUJ,IAD7D,IAAmCA,C,GAQqB,MACxDZ,EAAKC,OAAOK,iBAAiB,UAsB7B,SAAkBE,GAChBA,EAAES,iBACF,IAAMC,EAAWV,EAAEW,cAAcD,SAE7BE,EAAc,GAEbC,GAAa,EAAbC,GAAa,EAAbC,OAAaC,E,IAAlB,QAAKC,EAAAC,EAAiBR,EAAQS,OAAAC,cAAzBP,GAAAI,EAAAC,EAAaG,QAAAC,MAAbT,GAAa,EAAc,CAA3B,IAAMU,EAANN,EAAad,MACS,WAArBoB,EAAQC,WAGZZ,EAAYW,EAAQrB,MAAQqB,EAAQpB,M,WAJjCW,GAAa,EAAbC,EAAaU,C,aAAbZ,GAAa,MAAbK,EAAaQ,QAAbR,EAAaQ,Q,YAAbZ,E,MAAAC,C,EAMLY,QAAQC,IAAIhB,GAEZZ,EAAEC,OAAO4B,QACTtC,EAAqB,GA1CeuC,EAzBR,sBA0B5BzB,aAAa0B,WAAWD,GAD1B,IAAsCA,C,IAOtCE,OAAOC,OAEP,WAEE,GADA1C,EA3BF,WACE,IACE,IAAM2C,EAAoB7B,aAAa8B,QAAQ,uBAC/C,GAAID,EACF,OAAO3B,KAAK6B,MAAMF,E,CAEpB,MAAOG,GACPV,QAAQC,IAAIS,EAAMnC,MAClByB,QAAQC,IAAIS,EAAMC,Q,CAEpB,OAAO,C,CAiBcC,GAEnB,IAAK,IAAMC,KAAMhD,EACXD,EAAmBC,EAAKgD,GAAItC,QAC9BV,EAAKgD,GAAIrC,MAAQZ,EAAmBC,EAAKgD,GAAItC,YAIjDX,EAAqB,E,CAXTkD,E","sources":["src/js/03-feedback.js"],"sourcesContent":["import { throttle } from 'lodash';\n\nconst STORAGE_FORM_DATA_KEY = 'feedback-form-state';\nlet DataInLocalStorage = {};\nconst refs = {\n  formEl: document.querySelector('.feedback-form'),\n  inputEl: document.querySelector('input'),\n  textareaEl: document.querySelector('textarea'),\n};\n\nfunction getFormDataInLocalStorage() {\n  try {\n    const feedbackFormState = localStorage.getItem('feedback-form-state');\n    if (feedbackFormState) {\n      return JSON.parse(feedbackFormState);\n    }\n  } catch (error) {\n    console.log(error.name);\n    console.log(error.message);\n  }\n  return false;\n}\n\nfunction setFormDataInLocalStorage(feedbackForm) {\n  localStorage.setItem('feedback-form-state', JSON.stringify(feedbackForm));\n}\n\nfunction removeFormDataInLocalStorage(key) {\n  localStorage.removeItem(key);\n}\n\nrefs.formEl.addEventListener('input', throttle(onInput, 500));\nrefs.formEl.addEventListener('submit', onSubmit);\n\nwindow.onload = onLoadPage();\n\nfunction onLoadPage() {\n  DataInLocalStorage = getFormDataInLocalStorage();\n  if (DataInLocalStorage) {\n    for (const el in refs) {\n      if (DataInLocalStorage[refs[el].name]) {\n        refs[el].value = DataInLocalStorage[refs[el].name];\n      }\n    }\n  } else {\n    DataInLocalStorage = {};\n  }\n}\n\nfunction onInput(e) {\n  DataInLocalStorage[e.target.name] = e.target.value;\n  setFormDataInLocalStorage(DataInLocalStorage);\n}\n\nfunction onSubmit(e) {\n  e.preventDefault();\n  const elements = e.currentTarget.elements;\n\n  let formDataObj = {};\n\n  for (const element of elements) {\n    if (element.nodeName === 'BUTTON') {\n      continue;\n    }\n    formDataObj[element.name] = element.value;\n  }\n  console.log(formDataObj);\n\n  e.target.reset();\n  DataInLocalStorage = {};\n  removeFormDataInLocalStorage(STORAGE_FORM_DATA_KEY);\n}\n"],"names":["$1WSnx","parcelRequire","$b00c40859be242c5$var$DataInLocalStorage","$b00c40859be242c5$var$refs","formEl","document","querySelector","inputEl","textareaEl","addEventListener","throttle","e","target","name","value","feedbackForm","localStorage","setItem","JSON","stringify","preventDefault","elements","currentTarget","formDataObj","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","element","nodeName","err","return","console","log","reset","key","removeItem","window","onload","feedbackFormState","getItem","parse","error","message","$b00c40859be242c5$var$getFormDataInLocalStorage","el","$b00c40859be242c5$var$onLoadPage"],"version":3,"file":"03-feedback.cb1be69e.js.map"}